# {{ ansible_managed }}

log syslog all;
router id 185.66.195.242;

protocol direct {
        interface "*";
};

protocol kernel {
        device routes;
        import all;
        export all;
};

protocol device {
        scan time 8;
};

function is_default() {
        return (net ~ [::/0]);
};

function hostroute() {
        return (net ~ 2a03:2260:2000:1::2/128);
};

template bgp uplink {
        local as 65030;
        import where is_default();
        export where hostroute();
        next hop self;
        multihop 64;
};

protocol bgp fra from uplink {
        source address 2a03:2260:0:8a::2;
        neighbor 2a03:2260:0:8a::1 as 201701;
        default bgp_med 1;
};

protocol bgp dus from uplink {
        source address 2a03:2260:0:8b::2;
        neighbor 2a03:2260:0:8b::1 as 201701;
        default bgp_med 2;
};
